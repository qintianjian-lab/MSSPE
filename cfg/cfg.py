#!/usr/bin/env python
# -*- encoding: utf-8 -*-
# @file cfg.py
# @author: wujiangu
# @date: 2023-09-17 11:17
# @description: config file

cfg = {
    # train params
    # "device": "multi-gpu",
    "device": "auto",
    "need_memory": 13.8,  # GB
    "seed": 42,
    "freeze": 0,
    "debug": 0,
    "log": 1,
    "test": 1,
    "precision": "16-mixed",
    "num_workers": 16,
    "patience": 50,
    "min_delta": 0.000001,
    # dataset params
    "data_dir": "msspe/apogee_02",
    "image_size": [128, 128],
    # hyper params
    "epochs": 300,
    "lr": 1e-5,
    "eta_min": 1e-5,
    "T_0": 300,
    "data_item_list": [
        "sdss_photo",
        "sdss_mag",
        "wise_photo",
        "wise_mag",
        "lamost_spec",
    ],
    "data_suffix_list": [
        ".npy",
        ".npy",
        ".npy",
        ".npy",
        ".npy",
    ],
    # apogee_01 < 50
    # "sdss_photo_mean": [0.4623, 0.4393, 0.4568, 0.4140, 0.4058],
    # "sdss_photo_std": [0.2072, 0.2018, 0.2101, 0.1556, 0.1694],
    # "wise_photo_mean": [18.3516, 15.6350, 586.1960, 184.2069],
    # "wise_photo_std": [68.4383, 30.4080, 172.8064, 62.5761],
    # "sdss_mag_mean": [15.2839, 12.8205, 11.2259, 9.4105, 11.7766],
    # "sdss_mag_std": [66.4408, 105.0126, 140.8727, 187.1678, 93.9116],
    # "wise_mag_mean": [10.7323, 10.7978, 10.6605, 8.7506],
    # "wise_mag_std": [1.1623, 1.1485, 1.0944, 0.4223],
    # apogee_02 >= 50
    "sdss_photo_mean": [0.5318, 0.4952, 0.5157, 0.4315, 0.4270],
    "sdss_photo_std": [0.2322, 0.2270, 0.2333, 0.1684, 0.1844],
    "wise_photo_mean": [26.3570, 18.6211, 551.1241, 172.8317],
    "wise_photo_std": [93.7819, 42.3890, 183.7919, 66.8794],
    "sdss_mag_mean": [14.2370, 12.0209, 12.0317, 10.8581, 9.8303],
    "sdss_mag_std": [51.8455, 96.9521, 51.8310, 109.9230, 146.5538],
    "wise_mag_mean": [10.1123, 10.1764, 10.0832, 8.7050],
    "wise_mag_std": [1.1463, 1.1297, 1.1241, 0.4823],
    # sdss_photo, sdss_mag, wise_photo, wise_mag, lamost_spec
    "mask_use": [1, 1, 1, 1, 1],
    "T_mult": 2,
    "batch_size": 32,
    "mask_epoch": -1,
    "generate_epoch": 300,
    "generate_data": 0,
    "mask_max_num": 4,
    "generate_loss_scale": [0.1, 0.0, 0.1, 0.0, 0.1],
    "pred_names": [
        "teff",
        "logg",
        "ch",
        "nh",
        "oh",
        "mgh",
        "alh",
        "sih",
        "sh",
        "kh",
        "cah",
        "tih",
        "crh",
        "mnh",
        "feh",
        "nih",
    ],
    "pred_loss_scale": [
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
        1.0,
    ],
    "log_metric": "val_loss",
    "log_mode": "min",
    "model_params": {
        "head_dim": 128,
        "spec_embed_dim": 128,
        "spec_depth": [1, 1, 3, 1],
        "spec_depth_scale": 12.0,
        "spec_patch_conv_size": 3,
        "spec_patch_conv_stride": 1,
        "spec_pc_conv_size": 5,
        "spec_pc_conv_size_scale": 9,
        "spec_n_div": 8,
        "spec_merge_conv_size": 3,
        "spec_merge_conv_stride": 2,
        "spec_drop_path_rate": 0.1,
        "spec_attention": "ECA_F",
        "photo_embed_dim": 128,
        "photo_depth": [1, 1, 3, 1],
        "photo_depth_scale": 8.0,
        "photo_patch_conv_size": 3,
        "photo_patch_conv_stride": 2,
        "photo_pc_conv_size": 3,
        "photo_pc_conv_size_add": 6,
        "photo_n_div": 16,
        "photo_merge_conv_size": 3,
        "photo_merge_conv_stride": 2,
        "photo_drop_path_rate": 0.3,
        "photo_attention": "ECA_F",
        "fusion_nhead": 8,
        "fusion_nlayer": 2,
        "fusion_mask_attention": 0,
        "fusion_mlp_ratio": 2.0,
        "fusion_attn_drop": 0.0,
        "fusion_drop": 0.0,
        "fusion_drop_path": 0.0,
    },
}
